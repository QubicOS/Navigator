import { Theme } from "theme.slint";

export component StatusBar inherits Rectangle {
    in property <string> date_text: "";
    in property <string> time_text: "";
    in property <bool> wifi_connected: true;
    in property <int> battery_percent: 100;

    in property <length> gutter: Theme.gutter;
    in property <length> right_cluster_width: 140px;
    in property <length> right_text_width: 44px;
    in property <length> right_gap: 6px;
    in property <length> wifi_width: 26px;
    in property <length> wifi_height: 12px;

    background: @linear-gradient(180deg, Theme.surface_bg 0%, Theme.surface_bg_2 100%);

    Rectangle {
        y: parent.height - 1px;
        width: parent.width;
        height: 1px;
        background: Theme.border;
    }

    // Left cluster: date.
    Rectangle {
        x: root.gutter;
        width: 140px;
        height: parent.height;
        clip: true;
        background: #00000000;

        Text {
            width: parent.width;
            height: parent.height;
            text: root.date_text;
            color: Theme.text_dim;
            font-size: Theme.font_xs;
            horizontal-alignment: left;
            vertical-alignment: center;
        }
    }

    // Centered time (independent from left/right widths).
    Text {
        x: 0px;
        width: parent.width;
        height: parent.height;
        text: root.time_text;
        color: Theme.text;
        font-size: Theme.font_md;
        font-weight: 700;
        horizontal-alignment: center;
        vertical-alignment: center;
    }

    // Right cluster: WiFi + battery.
    right_cluster := Rectangle {
        x: parent.width - root.gutter - root.right_cluster_width;
        width: root.right_cluster_width;
        height: parent.height;
        clip: true;
        background: #00000000;

        battery_text := Text {
            x: parent.width - root.right_text_width;
            width: root.right_text_width;
            height: parent.height;
            text: battery_percent >= 0 ? battery_percent + "%" : "--%";
            color: Theme.text;
            font-size: Theme.font_xs;
            font-weight: 600;
            horizontal-alignment: right;
            vertical-alignment: center;
        }

        wifi := Rectangle {
            x: parent.width - root.right_text_width - root.right_gap - root.wifi_width;
            y: (parent.height - root.wifi_height) * 0.5;
            width: root.wifi_width;
            height: root.wifi_height;
            background: #00000000;
            opacity: root.wifi_connected ? 1 : 0.35;

            Rectangle { x: 0px; y: parent.height - 4px; width: 3px; height: 4px; background: Theme.text_muted; border-radius: 1px; }
            Rectangle { x: 5px; y: parent.height - 6px; width: 3px; height: 6px; background: Theme.text_dim; border-radius: 1px; }
            Rectangle { x: 10px; y: parent.height - 8px; width: 3px; height: 8px; background: Theme.text; border-radius: 1px; }
            Rectangle { x: 15px; y: parent.height - 10px; width: 3px; height: 10px; background: Theme.text; border-radius: 1px; }
        }
    }
}
